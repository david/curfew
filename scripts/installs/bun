#!/bin/bash
set -euo pipefail

# Install Bun.
# Usage: /usr/local/installs/bun [version]
# Default: latest

version="${1:-latest}"

export BUN_INSTALL=/usr/local

if [ "$version" = "latest" ]; then
    curl -fsSL https://bun.sh/install | bash
else
    curl -fsSL https://bun.sh/install | bash -s "bun-v${version}"
fi

# Make bun global installs available on PATH
cat > /etc/profile.d/deps-bun.sh <<'EOF'
export PATH="/home/app/.bun/bin:$PATH"
EOF
